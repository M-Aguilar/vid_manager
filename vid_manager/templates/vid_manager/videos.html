{% extends "vid_manager/base.html" %}
<!--CSSLINE{% load static %}-->
{% load bootstrap4 %}

{% block title %}Videos{% endblock %}
{% block header %}
<div class="jumbotron bg-dark text-light pt-1 pb-3 text-center display-4 mt-5 mb-0">
	<h2>{% if actors %}{{ actors }}{% elif tags %}{{ tags }}{% endif %} Videos: {{ videos.paginator.count }}</h3>
</div>
<div class='mt-3'>
	<a class="btn btn-dark" href="{% url 'new_video' %}">Add Video</a>
	<div class="dropdown float-right">
		<button class="btn btn-dark dropdown-toggle" type="button" id="ddM" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Sort</button>
		 <div class="dropdown-menu dropdown-menu-right" aria-labelledby="ddM">
   			{% load deslug clean %}
			{% for so in sort_options %}
    		<a class="dropdown-item {% if sort|deslug == so %}active{% endif %}" href="?sort={% if so == sort %}-{% endif %}{{so}}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">{% if sort == so %}-{% endif %}{{so|clean}}</a>
  			{% empty %}
	  		{% endfor %}
  		</div>
	</div>
</div>
<div class='d-flex row justify-content-center'>
	<span class="current text-center">
		Page <input id="pnum" type='number' minlength='1' max="{{ videos.paginator.num_pages }}" min='1' style="width: 35px" placeholder="{{videos.number}}"> of {{ videos.paginator.num_pages }}
	</span>
	<a id="plink" href=""></a>
	<script>
		var input = document.getElementById('pnum');
		input.addEventListener("keyup",function(event) {
			if (event.keyCode === 13) {
				var link = document.getElementById('plink');
				link.href = "?page=".concat(input.value, '{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actor={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}');
				link.click();
			}
		});
	</script>
</div>
<div class="pagination d-flex justify-content-center">
	<span class="step-links">
	{% if videos.has_previous %}
		<a class="btn btn-sm btn-dark" href="?page=1&{% if sort %}sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">&laquo; first</a>
		<a class="btn btn-sm btn-dark" href="?page={{ videos.previous_page_number }}{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">previous</a>
	{% endif %}
	{% if videos.has_next %}
		<a class="btn btn-sm btn-dark" href="?page={{ videos.next_page_number }}{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">next</a>
		<a class="btn btn-sm btn-dark" href="?page={{ videos.paginator.num_pages }}{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">last &raquo;</a>
	{% endif %}
	</span>
</div>
{% load static %}
{% endblock %}

{% block content %}
{% if messages %}
	<ul class="messages">
   	{% for message in messages %}
    	<li {% if message.tags %} class="bg-{{ message.tags }}"{% endif %}>{{ message }}</li>
   	{% endfor %}
	</ul>
{% endif %}
<div class="text-dark">
	<div class="row mx-1">
	{% for video in videos %}
		{% include 'vid_manager/video_preview.html' %}
	{% empty %}
		<div class="list-group-item">
			No videos have been added yet.
		</div>
	{% endfor %}
	</div>
</div>
<hr>
<div class="d-flex justify-content-center">
	<span class="current">
		Page {{ videos.number }} of {{ videos.paginator.num_pages }}
	</span>
</div>
<div class="pagination d-flex justify-content-center">
	<span class="step-links">
		{% if videos.has_previous %}
			<a class="btn btn-sm btn-dark" href="?page=1{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{ actors }}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">&laquo; first</a>
			<a class="btn btn-sm btn-dark" href="?page={{ videos.previous_page_number }}{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">previous</a>
		{% endif %}
		{% if videos.has_next %}
			<a class="btn btn-sm btn-dark" href="?page={{ videos.next_page_number }}{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">next</a>
			<a class="btn btn-sm btn-dark" href="?page={{ videos.paginator.num_pages }}{% if sort %}&sort={{sort}}{% endif %}{% if actors %}&actors={{actors}}{% endif %}{% if tags %}&tag={{tags}}{% endif %}{% if res %}&res={{res}}{% endif %}">last &raquo;</a>
		{% endif %}
	</span>
</div>
{% endblock %}